<div class="min-h-screen flex items-center justify-center bg-brand-surface">
  <mat-card class="w-full max-w-md">
    <mat-card-content class="space-y-4">
      <h1 class="text-lg font-semibold text-center">Nueva contraseña</h1>

      <ng-container *ngIf="!done; else okTpl">
        <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-4">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Nueva contraseña</mat-label>
            <input matInput type="password" formControlName="password" autocomplete="new-password">
            <mat-error *ngIf="form.controls.password.invalid">Mínimo 8 caracteres</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Confirmar contraseña</mat-label>
            <input matInput type="password" formControlName="confirm" autocomplete="new-password">
            <mat-error *ngIf="form.hasError('mismatch')">Las contraseñas no coinciden</mat-error>
          </mat-form-field>

          <button mat-raised-button color="primary" class="w-full" [disabled]="loading || form.invalid">
            {{ loading ? 'Guardando…' : 'Guardar' }}
          </button>
@if(error){
  <p class="text-sm text-red-600 text-center">{{ error }}</p>
}
        </form>
      </ng-container>

      <ng-template #okTpl>
        <p class="text-sm text-green-700 text-center">Listo. Te llevamos al login…</p>
      </ng-template>
    </mat-card-content>
  </mat-card>
</div>

